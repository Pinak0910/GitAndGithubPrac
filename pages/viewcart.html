<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/style/view_cart.css" />
  </head>
  <body>
    <header>
      <div class="wrapper">
        <div class="practo_logo_new"></div>
      </div>
    </header>
    <div class="bg-pale-grey-two">
      <div
        class="prev_page"
        onclick="(location.href='../pages/filter_page.html')"
      >
        <p>Go to previous page</p>
      </div>
      <div class="cart_container">
        <div class="cart_container1"><p id="tot_num"></p></div>
        <div class="border_bottom_cart" id="data"></div>
        <div
          class="Adding_more_cart"
          onclick="(location.href='../pages/filter_page.html')"
        >
          <button>Add more medicines</button>
        </div>
        <div class="u-position--fixed">
          <div class="box_carting">
            <p id="sum_amou"></p>
            <button>Chechout</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  let data = JSON.parse(localStorage.getItem("cart"))

  let parent = document.getElementById("data")

  data.forEach(({ image, tablet, price }) => {
    let div = document.createElement("div")
    div.className = "boxing_cart_container"
    let img = document.createElement("img")
    img.className = "img_cart"
    img.src = image

    let p = document.createElement("p")
    p.innerText = tablet
    p.className = "cart_name_para"
    let div1 = document.createElement("div")
    div1.className = "div1_cart_cont"
    let pri = document.createElement("p")
    pri.innerText = price
    pri.id = "price"
    pri.className = "price_cart_cont"

    let div2 = document.createElement("div")
    div2.className = "quantity button_view_cont"

    let b1 = document.createElement("button")
    b1.setAttribute("type", "button")
    b1.className = "btn minus-btn disabled"
    b1.textContent = "-"
    let in1 = document.createElement("input")
    in1.setAttribute("value", "1")
    in1.setAttribute("type", "text")
    in1.id = "quantity"
    let b2 = document.createElement("button")
    b2.setAttribute("type", "button")
    b2.className = "btn plus-btn"
    b2.textContent = "+"
    div2.append(b1, in1, b2)
    div1.append(pri, div2)
    div.append(img, p, div1)
    parent.append(div)
  })

  //setting default attribute to disabled of minus button
  document.querySelector(".minus-btn").setAttribute("disabled", "disabled")

  //taking value to increment decrement input value
  var valueCount

  //taking price value in variable
  var price = document.getElementById("price").innerText

  //   //price calculation function
  function priceTotal() {
    var total = valueCount * price
    console.log(typeof total)
    document.getElementById("price").innerText = total
  }

  //plus button
  document.querySelector(".plus-btn").addEventListener("click", function () {
    //getting value of input
    valueCount = document.getElementById("quantity").value

    //input value increment by 1
    valueCount++

    //setting increment input value
    document.getElementById("quantity").value = valueCount

    if (valueCount > 1) {
      document.querySelector(".minus-btn").removeAttribute("disabled")
      document.querySelector(".minus-btn").classList.remove("disabled")
    }

    //calling price function
    priceTotal()
  })

  //plus button
  document.querySelector(".minus-btn").addEventListener("click", function () {
    //getting value of input
    valueCount = document.getElementById("quantity").value

    //input value increment by 1
    valueCount--

    //setting increment input value
    document.getElementById("quantity").value = valueCount

    if (valueCount == 1) {
      document.querySelector(".minus-btn").setAttribute("disabled", "disabled")
    }

    //calling price function
    priceTotal()
  })
  function sumprice() {
    let suma = document.getElementById("sum_amou")
    let totnum = document.getElementById("tot_num")
    let data = JSON.parse(localStorage.getItem("cart"))
    totnum.innerText = `My cart: ${data.length} items`
    let sum = 0
    for (let i = 0; i < data.length; i++) {
      sum += Number(data[i].price)
    }
    suma.innerHTML = null
    suma.append("Payable Aount: â‚¹", sum)
  }
  sumprice()
</script>
